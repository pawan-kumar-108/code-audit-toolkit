<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>Code Health Report</title><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,sans-serif;background:#f5f5f5;padding:20px;transition:background .3s}body.dark{background:#1a1a1a;color:#e0e0e0}.container{max-width:1200px;margin:0 auto;background:white;padding:30px;border-radius:12px;box-shadow:0 4px 20px rgba(0,0,0,.1)}.dark .container{background:#2d2d2d}header{display:flex;justify-content:space-between;align-items:center;border-bottom:3px solid #3498db;padding-bottom:15px;margin-bottom:30px}h1{color:#2c3e50;font-size:28px}.dark h1{color:#e0e0e0}.theme-toggle{background:#3498db;color:white;border:none;padding:8px 16px;border-radius:6px;cursor:pointer}.score{font-size:64px;font-weight:bold;text-align:center;margin:30px 0;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.metrics{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;margin:30px 0}.metric{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;padding:20px;border-radius:10px}.metric strong{display:block;font-size:12px;opacity:.9;margin-bottom:5px}.metric span{font-size:28px;font-weight:bold}.section{margin:40px 0;padding:20px;background:#f8f9fa;border-radius:10px}.dark .section{background:#333}.section h2{color:#2c3e50;margin-bottom:20px}.dark .section h2{color:#e0e0e0}.search-box{width:100%;padding:12px;border:2px solid #ddd;border-radius:8px;font-size:16px;margin-bottom:20px}.dark .search-box{background:#444;border-color:#555;color:#e0e0e0}.tree{font-family:monospace;font-size:14px}.folder{cursor:pointer;padding:8px;margin:4px 0;border-radius:6px}.folder:hover{background:#e3f2fd}.dark .folder:hover{background:#404040}.complexity-bar{display:inline-block;height:20px;background:linear-gradient(90deg,#4caf50,#ffc107,#f44336);border-radius:4px;margin-left:10px}.issue{padding:12px;margin:8px 0;border-left:4px solid;border-radius:6px;display:flex;gap:10px}.critical{border-color:#e74c3c;background:#fadbd8}.dark .critical{background:#3d1f1f}.warning{border-color:#f39c12;background:#fef5e7}.dark .warning{background:#3d2f1f}.info{border-color:#3498db;background:#d6eaf8}.dark .info{background:#1f2d3d}.heatmap{display:grid;grid-template-columns:repeat(auto-fill,minmax(100px,1fr));gap:10px}.heatmap-cell{aspect-ratio:1;display:flex;align-items:center;justify-content:center;border-radius:8px;font-size:11px;font-weight:bold;color:white;text-align:center;padding:5px;cursor:pointer;transition:transform .2s}.heatmap-cell:hover{transform:scale(1.05)}.hidden{display:none}</style></head><body><div class="container"><header><h1>üè• Codebase Health Report</h1><button class="theme-toggle" onclick="toggleTheme()">üåì</button></header><div class="score">38/100</div><div class="metrics"><div class="metric"><strong>Total Lines</strong><span>13,079</span></div><div class="metric"><strong>Functions</strong><span>446</span></div><div class="metric"><strong>Code Lines</strong><span>10,371</span></div><div class="metric"><strong>Classes</strong><span>56</span></div><div class="metric"><strong>Files</strong><span>91</span></div><div class="metric"><strong>Comments</strong><span>6.0%</span></div></div><div class="section"><h2>üó∫Ô∏è Complexity Heatmap</h2><div class="heatmap" id="heatmap"></div></div><div class="section"><h2>üìÇ Interactive File Tree</h2><input type="text" class="search-box" id="searchBox" placeholder="üîç Search..." onkeyup="filterContent()"><div class="tree" id="fileTree"></div></div><div class="section"><h2>üî• Top Complex Functions</h2><div><div class="issue info"><span style="font-size:20px">üìÑ</span><div><strong>OpenManus/app/tool/sandbox/sb_shell_tool.py::_list_commands</strong><br>Complexity: 6 | Lines: 32</div></div><div class="issue info"><span style="font-size:20px">üìÑ</span><div><strong>OpenManus/app/tool/sandbox/sb_shell_tool.py::_terminate_command</strong><br>Complexity: 4 | Lines: 21</div></div><div class="issue info"><span style="font-size:20px">üìÑ</span><div><strong>OpenManus/app/config.py::__new__</strong><br>Complexity: 3 | Lines: 5</div></div><div class="issue info"><span style="font-size:20px">üìÑ</span><div><strong>OpenManus/app/config.py::__init__</strong><br>Complexity: 3 | Lines: 10</div></div><div class="issue info"><span style="font-size:20px">üìÑ</span><div><strong>OpenManus/app/tool/base.py::__str__</strong><br>Complexity: 3 | Lines: 4</div></div><div class="issue info"><span style="font-size:20px">üìÑ</span><div><strong>main.py::_analyze_file</strong><br>Complexity: 2 | Lines: 2</div></div><div class="issue info"><span style="font-size:20px">üìÑ</span><div><strong>main.py::_store_hash</strong><br>Complexity: 2 | Lines: 2</div></div><div class="issue info"><span style="font-size:20px">üìÑ</span><div><strong>main.py::_build_file_tree</strong><br>Complexity: 2 | Lines: 2</div></div><div class="issue info"><span style="font-size:20px">üìÑ</span><div><strong>main.py::format_terminal_report</strong><br>Complexity: 2 | Lines: 2</div></div><div class="issue info"><span style="font-size:20px">üìÑ</span><div><strong>OpenManus/run_mcp.py::run_mcp</strong><br>Complexity: 2 | Lines: 2</div></div></div></div><div class="section"><h2>‚ö†Ô∏è Issues</h2><div><div class="issue critical"><span style="font-size:20px">üî¥</span><div>Dangerous eval() usage in main.py:128</div></div><div class="issue critical"><span style="font-size:20px">üî¥</span><div>Dangerous exec() usage in main.py:129</div></div><div class="issue critical"><span style="font-size:20px">üî¥</span><div>Potential SQL injection in main.py:130</div></div><div class="issue critical"><span style="font-size:20px">üî¥</span><div>Dangerous exec() usage in OpenManus/app/tool/python_execute.py:30</div></div><div class="issue critical"><span style="font-size:20px">üî¥</span><div>Dangerous exec() usage in OpenManus/app/tool/chart_visualization/data_visualization.py:244</div></div><div class="issue critical"><span style="font-size:20px">üî¥</span><div>Dangerous exec() usage in OpenManus/app/tool/sandbox/sb_browser_tool.py:216</div></div></div></div></div><script>const d={"OpenManus": {"_files": [{"name": "run_mcp.py", "complexity": 2, "lines": 2, "func_count": 1}, {"name": "main.py", "complexity": 1, "lines": 2, "func_count": 1}, {"name": "sandbox_main.py", "complexity": 1, "lines": 2, "func_count": 1}, {"name": "run_flow.py", "complexity": 1, "lines": 3, "func_count": 1}], "_complexity": 12, "_lines": 23, "app": {"_files": [{"name": "config.py", "complexity": 3, "lines": 5, "func_count": 1}, {"name": "llm.py", "complexity": 2, "lines": 2, "func_count": 1}, {"name": "schema.py", "complexity": 1, "lines": 2, "func_count": 1}, {"name": "exceptions.py", "complexity": 1, "lines": 5, "func_count": 1}, {"name": "logger.py", "complexity": 1, "lines": 2, "func_count": 1}, {"name": "bedrock.py", "complexity": 1, "lines": 2, "func_count": 1}], "_complexity": 70, "_lines": 157, "tool": {"_files": [{"name": "base.py", "complexity": 3, "lines": 4, "func_count": 1}, {"name": "create_chat_completion.py", "complexity": 2, "lines": 2, "func_count": 1}, {"name": "computer_use_tool.py", "complexity": 2, "lines": 2, "func_count": 1}, {"name": "planning.py", "complexity": 2, "lines": 2, "func_count": 1}, {"name": "browser_use_tool.py", "complexity": 2, "lines": 3, "func_count": 1}, {"name": "file_operators.py", "complexity": 2, "lines": 2, "func_count": 1}, {"name": "bash.py", "complexity": 2, "lines": 4, "func_count": 1}, {"name": "web_search.py", "complexity": 2, "lines": 2, "func_count": 1}, {"name": "crawl4ai.py", "complexity": 2, "lines": 2, "func_count": 1}, {"name": "tool_collection.py", "complexity": 2, "lines": 3, "func_count": 1}, {"name": "mcp.py", "complexity": 2, "lines": 2, "func_count": 1}, {"name": "ask_human.py", "complexity": 1, "lines": 3, "func_count": 1}, {"name": "str_replace_editor.py", "complexity": 1, "lines": 2, "func_count": 1}, {"name": "terminate.py", "complexity": 1, "lines": 2, "func_count": 1}, {"name": "python_execute.py", "complexity": 1, "lines": 2, "func_count": 1}], "_complexity": 130, "_lines": 248, "sandbox": {"_files": [{"name": "sb_shell_tool.py", "complexity": 6, "lines": 32, "func_count": 1}, {"name": "sb_files_tool.py", "complexity": 2, "lines": 2, "func_count": 1}, {"name": "sb_vision_tool.py", "complexity": 1, "lines": 2, "func_count": 1}, {"name": "sb_browser_tool.py", "complexity": 1, "lines": 2, "func_count": 1}], "_complexity": 43, "_lines": 116}, "chart_visualization": {"_files": [{"name": "data_visualization.py", "complexity": 2, "lines": 2, "func_count": 1}, {"name": "python_execute.py", "complexity": 1, "lines": 3, "func_count": 1}], "_complexity": 9, "_lines": 17, "test": {"_files": [{"name": "chart_demo.py", "complexity": 2, "lines": 10, "func_count": 1}, {"name": "report_demo.py", "complexity": 1, "lines": 2, "func_count": 1}], "_complexity": 3, "_lines": 12}}, "search": {"_files": [{"name": "base.py", "complexity": 1, "lines": 2, "func_count": 1}, {"name": "duckduckgo_search.py", "complexity": 1, "lines": 2, "func_count": 1}, {"name": "google_search.py", "complexity": 1, "lines": 2, "func_count": 1}, {"name": "baidu_search.py", "complexity": 1, "lines": 2, "func_count": 1}, {"name": "bing_search.py", "complexity": 1, "lines": 2, "func_count": 1}], "_complexity": 9, "_lines": 18}}, "agent": {"_files": [{"name": "base.py", "complexity": 2, "lines": 2, "func_count": 1}, {"name": "mcp.py", "complexity": 2, "lines": 2, "func_count": 1}, {"name": "toolcall.py", "complexity": 2, "lines": 2, "func_count": 1}, {"name": "manus.py", "complexity": 1, "lines": 2, "func_count": 1}, {"name": "react.py", "complexity": 1, "lines": 4, "func_count": 1}, {"name": "sandbox_agent.py", "complexity": 1, "lines": 2, "func_count": 1}, {"name": "browser.py", "complexity": 1, "lines": 2, "func_count": 1}], "_complexity": 56, "_lines": 107}, "daytona": {"_files": [{"name": "sandbox.py", "complexity": 2, "lines": 3, "func_count": 1}, {"name": "tool_base.py", "complexity": 2, "lines": 2, "func_count": 1}], "_complexity": 12, "_lines": 20}, "flow": {"_files": [{"name": "planning.py", "complexity": 2, "lines": 2, "func_count": 1}, {"name": "base.py", "complexity": 2, "lines": 2, "func_count": 1}, {"name": "flow_factory.py", "complexity": 1, "lines": 2, "func_count": 1}], "_complexity": 21, "_lines": 39}, "utils": {"_files": [{"name": "files_utils.py", "complexity": 2, "lines": 3, "func_count": 1}], "_complexity": 3, "_lines": 6}, "sandbox": {"_files": [{"name": "client.py", "complexity": 1, "lines": 3, "func_count": 1}], "_complexity": 20, "_lines": 63, "core": {"_files": [{"name": "manager.py", "complexity": 2, "lines": 3, "func_count": 1}, {"name": "terminal.py", "complexity": 1, "lines": 3, "func_count": 1}, {"name": "sandbox.py", "complexity": 1, "lines": 2, "func_count": 1}], "_complexity": 46, "_lines": 122}}, "mcp": {"_files": [{"name": "server.py", "complexity": 1, "lines": 2, "func_count": 1}], "_complexity": 9, "_lines": 18}}, "tests": {"_files": [], "_complexity": 0, "_lines": 0, "sandbox": {"_files": [{"name": "test_client.py", "complexity": 2, "lines": 2, "func_count": 1}, {"name": "test_sandbox.py", "complexity": 2, "lines": 2, "func_count": 1}, {"name": "test_docker_terminal.py", "complexity": 1, "lines": 2, "func_count": 1}, {"name": "test_sandbox_manager.py", "complexity": 1, "lines": 3, "func_count": 1}], "_complexity": 38, "_lines": 71}}, "protocol": {"_files": [], "_complexity": 0, "_lines": 0, "a2a": {"_files": [], "_complexity": 0, "_lines": 0, "app": {"_files": [{"name": "agent.py", "complexity": 1, "lines": 2, "func_count": 1}, {"name": "agent_executor.py", "complexity": 1, "lines": 3, "func_count": 1}, {"name": "main.py", "complexity": 1, "lines": 2, "func_count": 1}], "_complexity": 9, "_lines": 31}}}}, "_files": [{"name": "main.py", "complexity": 2, "lines": 2, "func_count": 1}], "_complexity": 21, "_lines": 34},c=[{"name": "_list_commands", "file": "OpenManus/app/tool/sandbox/sb_shell_tool.py", "lines": 32, "complexity": 6}, {"name": "_terminate_command", "file": "OpenManus/app/tool/sandbox/sb_shell_tool.py", "lines": 21, "complexity": 4}, {"name": "__new__", "file": "OpenManus/app/config.py", "lines": 5, "complexity": 3}, {"name": "__init__", "file": "OpenManus/app/config.py", "lines": 10, "complexity": 3}, {"name": "__str__", "file": "OpenManus/app/tool/base.py", "lines": 4, "complexity": 3}, {"name": "_analyze_file", "file": "main.py", "lines": 2, "complexity": 2}, {"name": "_store_hash", "file": "main.py", "lines": 2, "complexity": 2}, {"name": "_build_file_tree", "file": "main.py", "lines": 2, "complexity": 2}, {"name": "format_terminal_report", "file": "main.py", "lines": 2, "complexity": 2}, {"name": "run_mcp", "file": "OpenManus/run_mcp.py", "lines": 2, "complexity": 2}];function toggleTheme(){document.body.classList.toggle('dark');localStorage.setItem('theme',document.body.classList.contains('dark')?'dark':'light')}function buildTree(o,p=''){let h='';for(let k in o){if(k.startsWith('_'))continue;const f=o[k],cx=f._complexity||0,ln=f._lines||0,w=Math.min(200,cx*2);h+=`<div class='folder' onclick='toggleFolder(this)'><span>üìÅ</span> ${k}<span class='complexity-bar' style='width:${w}px'></span><span style='margin-left:10px;color:#888;font-size:12px'>(${ln} lines)</span></div>`;h+=`<div class='hidden' style='margin-left:30px'>${buildTree(f,p+k+'/')}</div>`;if(f._files)f._files.forEach(x=>h+=`<div style='margin-left:30px;padding:5px'>üìÑ ${x.name} <span style='color:#888'>(complexity: ${x.complexity})</span></div>`)}return h}function toggleFolder(e){const n=e.nextElementSibling;if(n){n.classList.toggle('hidden');e.querySelector('span').textContent=n.classList.contains('hidden')?'üìÅ':'üìÇ'}}function buildHeatmap(){const h=document.getElementById('heatmap');c.forEach(f=>{const el=document.createElement('div');el.className='heatmap-cell';const i=Math.min(f.complexity/50,1),col=`hsl(${120-i*120},70%,50%)`;el.style.background=col;el.innerHTML=`${f.file.split('/').pop()}<br><small>${f.complexity}</small>`;el.title=`${f.file}::${f.name}\nComplexity: ${f.complexity}`;h.appendChild(el)})}function filterContent(){const q=document.getElementById('searchBox').value.toLowerCase();document.querySelectorAll('.folder,.issue').forEach(e=>e.style.display=e.textContent.toLowerCase().includes(q)?'':'none')}document.getElementById('fileTree').innerHTML=buildTree(d);buildHeatmap();if(localStorage.getItem('theme')==='dark')document.body.classList.add('dark');</script></body></html>